<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Nature map</title>
    <link rel="stylesheet" type="text/css" href="./bin/css/style.css"/>
    <link href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css" rel="stylesheet"/>
  </head>
  <body>
    <div id="back-containter" class="globalP fullSize flexBox" style="background-color: blueviolet;">
      <div id="main-containter" class="flexBox" style="flex: 1; background-color: white; margin: 10px; position: relative;">
        <div id="map-container" class="flexBox" style="background-color: aqua; position: absolute; top: 0; left: 0; right: 0; bottom: 0;">
        </div>
        <div id="layer1" style="z-index: 2;">
          <div>
            <input type="button" id="test-button" value="ClickMe"/>
            <input type="button" id="show-form-button" value="Show form"/>
          </div>
        </div>
        <div id="overlay-layer"></div>
      </div>
    </div>
    <script type="module">
      /**/
      import {MyMap, OSMLayer} from './scripts/map.js';
      import {Overlay, LogType, FormValueType} from './scripts/overlay.js';

      /* Overlay creation */
      var overlay = new Overlay('overlay-layer', {});
      console.log(overlay);
      //overlay.log('SKJDHFKLSJDHFKJSHDf');

      document.getElementById('test-button').onclick = ()=>{
        overlay.log('WTF maaaaan???', LogType.eWarning);
      };

      var values = {
        str: 'asdfklsdfa',
        number: 1,
        bool: false,
      };
      document.getElementById('show-form-button').onclick = ()=>{
        overlay.showForm({
          name: 'test',
          valuesProps: {
            str: {
              name: 'str',
              type: FormValueType.eText,
            },
            number: {
              name: 'number',
              type: FormValueType.eNumber,
            },
            bool: {
              name: 'bool',
              type: FormValueType.eBool,
            },
          },
          inValues: values,
          onCloseCallBack: ( newValues )=>{
            console.log('NEW VALUES:');
            console.log(newValues);
            values = newValues;
          }
        });
      };

      /* Map creation */
      var map = new MyMap({
        targetElementId: "map-container",
        center: { x: 3370533.758063, y: 8387091.147105},
        zoom: 7,
        layers: [new OSMLayer()],
      });
      /**/
    </script>
  </body>
</html>